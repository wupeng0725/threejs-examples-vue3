import{W as A,P as z,b as j,G as F,n as U,H as E,M as T,c as N,V as I}from"./three-DttFUdCx.js";import{O as B}from"./BoundingBox-DQUfF6hG.js";import{g as D}from"./Texture-DPtgIHEV.js";import{r as W,o as q,a as G,c as L,b as H}from"./highlight-_NCVw0wD.js";import"./index-bM0EArmZ.js";var M=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return this.None(t)},Out:function(t){return this.None(t)},InOut:function(t){return this.None(t)}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(t){var e=1.70158;return t===1?1:t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return t===0?0:--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-M.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?M.Bounce.In(t*2)*.5:M.Bounce.Out(t*2-1)*.5+.5}}),generatePow:function(t){return t===void 0&&(t=4),t=t<Number.EPSILON?Number.EPSILON:t,t=t>1e4?1e4:t,{In:function(e){return Math.pow(e,t)},Out:function(e){return 1-Math.pow(1-e,t)},InOut:function(e){return e<.5?Math.pow(e*2,t)/2:(1-Math.pow(2-e*2,t))/2+.5}}}}),C=function(){return performance.now()},Q=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(i){return e._tweens[i]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},t.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},t.prototype.update=function(e,i){e===void 0&&(e=C()),i===void 0&&(i=!1);var n=Object.keys(this._tweens);if(n.length===0)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<n.length;s++){var a=this._tweens[n[s]],r=!i;a&&a.update(e,r)===!1&&!i&&delete this._tweens[n[s]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),k={Linear:function(t,e){var i=t.length-1,n=i*e,s=Math.floor(n),a=k.Utils.Linear;return e<0?a(t[0],t[1],n):e>1?a(t[i],t[i-1],i-n):a(t[s],t[s+1>i?i:s+1],n-s)},Utils:{Linear:function(t,e,i){return(e-t)*i+t}}},R=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),x=new Q,J=function(){function t(e,i){i===void 0&&(i=x),this._object=e,this._group=i,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=M.Linear.None,this._interpolationFunction=k.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=R.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.getDuration=function(){return this._duration},t.prototype.to=function(e,i){if(i===void 0&&(i=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=i<0?0:i,this},t.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},t.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},t.prototype.start=function(e,i){if(e===void 0&&(e=C()),i===void 0&&(i=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||i){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var a in this._valuesEnd)s[a]=this._valuesEnd[a];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,i)}return this},t.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},t.prototype._setupProperties=function(e,i,n,s,a){for(var r in n){var o=e[r],u=Array.isArray(o),S=u?"array":typeof o,y=!u&&Array.isArray(n[r]);if(!(S==="undefined"||S==="function")){if(y){var l=n[r];if(l.length===0)continue;for(var f=[o],d=0,v=l.length;d<v;d+=1){var O=this._handleRelativeValue(o,l[d]);if(isNaN(O)){y=!1;break}f.push(O)}y&&(n[r]=f)}if((S==="object"||u)&&o&&!y){i[r]=u?[]:{};var g=o;for(var _ in g)i[r][_]=g[_];s[r]=u?[]:{};var l=n[r];if(!this._isDynamic){var b={};for(var _ in l)b[_]=l[_];n[r]=l=b}this._setupProperties(g,i[r],l,s[r],a)}else(typeof i[r]>"u"||a)&&(i[r]=o),u||(i[r]*=1),y?s[r]=n[r].slice().reverse():s[r]=i[r]||0}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(e){return e===void 0&&(e=C()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},t.prototype.resume=function(e){return e===void 0&&(e=C()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},t.prototype.stopChainedTweens=function(){for(var e=0,i=this._chainedTweens.length;e<i;e++)this._chainedTweens[e].stop();return this},t.prototype.group=function(e){return e===void 0&&(e=x),this._group=e,this},t.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},t.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},t.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},t.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},t.prototype.easing=function(e){return e===void 0&&(e=M.Linear.None),this._easingFunction=e,this},t.prototype.interpolation=function(e){return e===void 0&&(e=k.Linear),this._interpolationFunction=e,this},t.prototype.chain=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return this._chainedTweens=e,this},t.prototype.onStart=function(e){return this._onStartCallback=e,this},t.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},t.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},t.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},t.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},t.prototype.onStop=function(e){return this._onStopCallback=e,this},t.prototype.update=function(e,i){var n=this,s;if(e===void 0&&(e=C()),i===void 0&&(i=!0),this._isPaused)return!0;var a,r=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>r)return!1;i&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=e-this._startTime,u=this._duration+((s=this._repeatDelayTime)!==null&&s!==void 0?s:this._delayTime),S=this._duration+this._repeat*u,y=function(){if(n._duration===0||o>S)return 1;var g=Math.trunc(o/u),_=o-g*u,b=Math.min(_/n._duration,1);return b===0&&o===n._duration?1:b},l=y(),f=this._easingFunction(l);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,f),this._onUpdateCallback&&this._onUpdateCallback(this._object,l),this._duration===0||o>=this._duration)if(this._repeat>0){var d=Math.min(Math.trunc((o-this._duration)/u)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=d);for(a in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[a]=="string"&&(this._valuesStartRepeat[a]=this._valuesStartRepeat[a]+parseFloat(this._valuesEnd[a])),this._yoyo&&this._swapEndStartRepeatValues(a),this._valuesStart[a]=this._valuesStartRepeat[a];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=u*d,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var v=0,O=this._chainedTweens.length;v<O;v++)this._chainedTweens[v].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(e,i,n,s){for(var a in n)if(i[a]!==void 0){var r=i[a]||0,o=n[a],u=Array.isArray(e[a]),S=Array.isArray(o),y=!u&&S;y?e[a]=this._interpolationFunction(o,s):typeof o=="object"&&o?this._updateProperties(e[a],r,o,s):(o=this._handleRelativeValue(r,o),typeof o=="number"&&(e[a]=r+(o-r)*s))}},t.prototype._handleRelativeValue=function(e,i){return typeof i!="string"?i:i.charAt(0)==="+"||i.charAt(0)==="-"?e+parseFloat(i):parseFloat(i)},t.prototype._swapEndStartRepeatValues=function(e){var i=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=i},t}();R.nextId;var w=x;w.getAll.bind(w);w.removeAll.bind(w);w.add.bind(w);w.remove.bind(w);var K=w.update.bind(w);const m={__name:"TweenBox",setup(t){const e=W(null);let i=null,n=null,s=null,a=null,r=null,o=null;function u(){i=new A({canvas:e.value,antialias:!0}),n=new z(75,window.innerWidth/window.innerHeight,.1,1e3),n.position.set(2,2,5),n.lookAt(0,0,0),s=new j;{const p=new F(5);s.add(p),r=new B(n,i.domElement)}const f=new U(1,32,32),d=new E({color:4500104}),v=new T(f,d);s.add(v),v.name="球体",v.position.x=-4;const O=new N(1,1,1),g=new E({color:16711680}),_=new T(O,g);s.add(_),_.name="正方体",_.position.x=4;function b(p,h){new J({x:n.position.x,y:n.position.y,z:n.position.z,tx:r.target.x,ty:r.target.y,tz:r.target.z}).to({x:p.x,y:p.y,z:p.z,tx:h.x,ty:h.y,tz:h.z},1e3).onUpdate(function(c){n.position.set(c.x,c.y,c.z),r.target.set(c.tx,c.ty,c.tz)}).start()}let P={near1:function(){const p=s.getObjectByName("球体"),h=new I;p.getWorldPosition(h);const c=h.clone().addScalar(6);c.x=h.x-6,b(c,r.target)},near2:function(){const p=s.getObjectByName("正方体"),h=new I;p.getWorldPosition(h);const c=h.clone().addScalar(6);b(c,r.target)},near3:function(){const p=s.getObjectByName("正方体"),h=new I;p.getWorldPosition(h);const c=h.clone().addScalar(2);b(c,h)},near4:function(){const p=s.getObjectByName("球体"),h=new I;p.getWorldPosition(h);const c=h.clone().addScalar(2);b(c,h)}};o=new D,o.add(P,"near1").name("飞行观察球体"),o.add(P,"near2").name("飞行观察正方体"),o.add(P,"near3").name("靠近放大观察正方体"),o.add(P,"near4").name("靠近放大观察球体")}function S(f){const d=f.domElement,v=window.devicePixelRatio,O=Math.floor(d.clientWidth*v),g=Math.floor(d.clientHeight*v),_=d.width!==O||d.height!==g;return _&&f.setSize(O,g,!1),_}const y=()=>{a&&cancelAnimationFrame(a),s.traverse(f=>{f.isMesh&&(f.geometry.dispose(),f.material.dispose())}),i.dispose(),i.forceContextLoss(),i.domElement=null,i=null,r.dispose(),r=null,s=null,n=null,e.value=null,o.destroy(),o=null};function l(){if(r.update(),S(i)){const f=i.domElement;n.aspect=f.clientWidth/f.clientHeight,n.updateProjectionMatrix()}K(),i.render(s,n),a=requestAnimationFrame(l)}return q(()=>{u(),requestAnimationFrame(l)}),G(()=>{y()}),(f,d)=>(H(),L("canvas",{ref_key:"canvasRef",ref:e},null,512))}};export{m as default};
